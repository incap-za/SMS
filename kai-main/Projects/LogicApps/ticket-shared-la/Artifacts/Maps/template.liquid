{% comment %}
#################################################################################################
# Variable declaration
#################################################################################################
{% endcomment %}
{% assign inputAttUserName = content.attachmentConfig.userName %}
{% assign inputAttUrl = content.attachmentConfig.baseUrl %}
{% assign inputAttKeyVaultEntry = content.attachmentConfig.keyvaultEntry %}

{% assign transactionID = content.expressions.transactionID %}
{% assign nowCET = content.expressions.nowCet %}

{% assign functionOutput = content.functionOutput %}
{% assign mailFrom = content.mailFrom %}
{% assign mailOB = content.mailOb %}
{% assign environment = content.environment %}

{% assign inputActionType = content.messageData.action_type %}
{% assign inputProcessType = content.messageData.process_type %}
{% assign inputReferenceNumber = content.messageData.reference_number %}
{% assign inputTicketNumber = content.messageData.ticket_number %}
{% assign inputState = content.messageData.state %}
{% assign inputTicketAttributes = content.messageData.ticket_attributes %}
{% assign inputFileName = content.messageData.attachment.filename %}
{% assign inputContentType = content.messageData.attachment.content_type %}
{% assign inputContent = content.messageData.attachment.content %}
{% assign inputSize = content.messageData.attachment.size %}
{% assign inputAttachmentAction = content.messageData.attachment.action %}
{% assign inputAttachmentSysId = content.messageData.attachment.attachment_sys_id %}

{% assign inputBaseUrl = content.restConfig.BaseUrl %}
{% assign inputDestination = content.restConfig.Destination %}
{% assign inputUserName = content.restConfig.UserName %}
{% assign inputKeyvaultEntry = content.restConfig.KeyvaulEntry %}
{% assign inputSource = content.restConfig.Source %}

{% assign inputFirstResponse = content.firstResponse %}


{% comment %}
#################################################################################################
# End of variable declaration Section
# Start of the logic Section
#################################################################################################
{% endcomment %}


{% comment %}
#################################################################################################
# Liquid output JSON message
#################################################################################################
{% endcomment %}

{
    {% comment %}mail properties{% endcomment %}
    "mailBody": "{{mailBody}}",
    "from": "{{mailFrom}}",
    "bcc": "{{mailBcc}}",
    "importance": "{{importance}}", 
    "isHtml": false,
    "subject": "{{varSubject}}",
    "to": "{{varTo}}",

    {% comment %}http properties{% endcomment %}
    "fullURl":"{{fullUri}}",
    "httpMethod":"{{httpMethod}}",
    "headers": {{headers}},
    "queries":{{queries}},
    "body": {{body}},
    "KeyvaulEntry": "{{inputKeyvaultEntry}}",
    "userName": "{{inputUserName}}",

    "attachmentType": "{{attachmentType}}" {% comment %}mandatory, supported values are mail, basic, oauth{% endcomment %}
}